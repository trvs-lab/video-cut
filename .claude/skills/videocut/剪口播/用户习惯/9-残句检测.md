<!--
input: 按静音分隔的句子列表
output: 残句索引列表
pos: 规则，建议删优先级

架构守护者：一旦我被修改，请同步更新：
1. 所属文件夹的 README.md
-->

# 残句检测

## 定义

话说到一半突然停住，后面接了静音或重新开始。

## 核心原则

**整句删除**：识别出残句后，从句首到句尾全部删除，不只是删结尾几个字。

## 正确分析方法

```
✓ 正确：先分句 → 判断完整性 → 整句删除
✗ 错误：逐字扫描 → 发现异常结尾 → 只删结尾
```

### 步骤

1. **先按静音切分句子**（静音≥0.5s作为分隔）
2. **判断每句是否完整**（语义、语法是否自然）
3. **残句整体标记删除**（从 startIdx 到 endIdx）

## 模式

```
残句(整句) + [静音] + 完整句
    ↓
  全删
```

## 案例

| 残句 | 后续 | 删除范围 |
|------|------|---------|
| "他呢" | [静音] + "这是我剪出来的..." | "他呢" 整句 |
| "为什么做这个东西呢一" | [静音] + "做这个东西的原因是" | **整句**（不只是"呢一"） |
| "分本区别就是剪映它虽然" | [静音3s] + "眼影它是没有学习能力的" | 整句 + 静音 |
| "我们先打具体怎么做呢" | "首先" | 整句 |
| "打开我们的AI" | [静音] + "打开我们的AI然后..." | 整句（前一个不完整版本） |

## 判断标准

1. **句子不完整**：缺少宾语、谓语或结尾不自然
2. **后接静音**：残句后通常有明显停顿
3. **后有重说**：重新开始说类似内容

## 与重复句的区别

- **重复句**：两句都完整，只是开头相同 → 删较短的
- **残句**：前一句明显不完整，被打断了 → 删不完整的整句

## 常见残句特征

- 以"呢"、"吧"、"的"等虚词结尾但不构成完整句
- 以数字、量词结尾但后面没有名词
- 句子戛然而止，语义不完整
- 话说一半被打断，后面重新开始

## 易错点

```
❌ 只删"呢一"（异常结尾）
✓ 删"为什么做这个东西呢一"（整个残句）
```

**切记**：残句的问题不只是结尾，而是整句都没说完，所以要整句删除。
